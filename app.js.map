{"version":3,"file":"../app.js","sources":["app/application.js","app/components.js","app/config.js","app/controllers.js","app/countries/australia.json","app/countries/austria.json","app/countries/belarus.json","app/countries/canada.json","app/countries/china.json","app/countries/cyprus.json","app/countries/czech-republic.json","app/countries/france.json","app/countries/georgia.json","app/countries/germany.json","app/countries/hong-kong.json","app/countries/iceland.json","app/countries/ireland.json","app/countries/israel.json","app/countries/italy.json","app/countries/japan.json","app/countries/latvia.json","app/countries/malaysia.json","app/countries/netherlands.json","app/countries/poland.json","app/countries/russia.json","app/countries/singapore.json","app/countries/south-korea.json","app/countries/spain.json","app/countries/sweden.json","app/countries/thailand.json","app/countries/uae.json","app/countries/uk.json","app/countries/ukraine.json","app/countries/usa.json","app/helpers.js","app/init.js","app/models.js","app/routes.js","app/utils.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5FA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzMA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhIA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvJA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5EA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApNA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7FA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;ACAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtKA","sourcesContent":["var config = require('config');\nvar normalizeRates = require('utils').normalizeRates;\n\nvar countriesData =\n  window.require.list()\n  .filter(function(moduleName) {\n    return /^countries/.test(moduleName);\n  })\n  .map(require)\n  .map(function(country) {\n    if (country.rates) country.rates.forEach(function(rate) {\n      if (rate.max == null) rate.max = Infinity;\n    });\n    return country;\n  });\n\nvar currSortOrder = config.currencies.sorter;\nvar currSymbols = config.currencies.symbols;\n\nvar currencies = countriesData\n  .map(function(country) { return country.code })\n  .uniq()\n  .map(function(code) {\n    if (!currSymbols[code]) currSymbols[code] = code;\n    return {code: code, symbol: currSymbols[code]};\n  })\n  .sort(function(a, b) {\n    var ia = currSortOrder.indexOf(a.code)\n    var ib = currSortOrder.indexOf(b.code);\n    if (ia === -1) ia = 1000;\n    if (ib === -1) ib = 1000;\n    return ia - ib;\n  });\n\nvar App = Ember.Application.create({\n  rootElement: '#app',\n\n  ready: function() {\n    console.log('The app is started');\n    $('.loader').hide();\n  }\n});\nwindow.App = App;\n\nApp.deferReadiness();\n\n[\n  'components', 'controllers', 'helpers', 'models', 'routes'\n].forEach(require);\n\nvar countries = countriesData.map(function(data) {\n  data.rates = normalizeRates(data);\n  var country = App.Country.create(data);\n\n  // States of the country.\n  var states = (country.states || []).map(function(state) {\n    state.country = country;\n    state.rates = normalizeRates(state);\n    return App.CountryState.create(state);\n  });\n  country.set('states', states);\n\n  return country;\n\n  // item=data;\n  // item.rates = normalizeRates(item);\n\n  // var country = App.Country.create(item);\n\n  // var states = [];\n\n  // if (item.states) {\n  //   states = item.states.map(function(state) {\n  //     state.country = country;\n  //     state.rates = normalizeRates(state);\n\n  //     return App.CountryState.create(state);\n  //   });\n  // }\n\n  // country.set('states', states);\n  // return country;\n});\n\nApp.CURRENCIES = currencies;\nApp.COUNTRIES = countries;\n\nEmber.TextField.reopen({\n  attributeBindings: ['autofocus', 'autocomplete']\n});\n\nmodule.exports = window.App = App;\n","var symbols = require('config').currencies.symbols;\nvar utils = require('utils');\n\nApp.SubjectiveBaseComponent = Ember.Component.extend({\n  tagName: 'b',\n  classNameBindings: ['descriptionClass'],\n\n  descriptionClass: function() {\n    return this.get('description').replace(/\\s+/g, '-');\n  }.property('description')\n});\n\nApp.SubjectiveClimateComponent = App.SubjectiveBaseComponent.extend({\n  layout: Ember.Handlebars.compile('{{description}}'),\n\n  climate: null,\n  avg: function() {\n    return (this.get('climate.high') + this.get('climate.low')) / 2;\n  }.property('climate.{high,low}'),\n\n  description: function() {\n    return utils.subjectiveWord('climate', this.get('avg'));\n  }.property('avg')\n});\n\nApp.CountryRatingComponent = Ember.Component.extend({\n  name: null,\n  rating: null,\n\n  sources: {\n    crime: 'http://www.numbeo.com/crime/rankings_by_country.jsp',\n    prices: 'http://www.numbeo.com/cost-of-living/rankings_by_country.jsp',\n    business: 'http://www.doingbusiness.org/rankings',\n    corruption: 'http://cpi.transparency.org/cpi2013/results/'\n  },\n\n  labels: {\n    crime: 'Crime index',\n    prices: 'Consumer price index',\n    business: 'Doing business',\n    corruption: 'Corruption perception'\n  },\n\n  source: function() {\n    var name = this.get('name');\n    return this.get('sources')[name];\n  }.property('name', 'sources'),\n\n  label: function() {\n    var name = this.get('name');\n    return this.get('labels')[name];\n  }.property('name', 'labels')\n});\n\nApp.TaxBandsComponent = Ember.Component.extend({\n  countryOrState: null,\n  currencyCode: null,\n\n  currency: function() {\n    return symbols[this.get('currencyCode')];\n  }.property('currencyCode'),\n\n  sourceCurrencyCode: Ember.computed.alias('countryOrState.code'),\n  rates: Ember.computed.alias('countryOrState.rates'),\n  isFlatTax: Ember.computed.alias('countryOrState.isFlatTax'),\n  flatTaxRate: Ember.computed.alias('countryOrState.flatTaxRate'),\n\n  bands: function() {\n    var rates = this.get('rates').slice();\n    var currency = this.get('currencyCode');\n    var sourceCurrency = this.get('sourceCurrencyCode');\n\n    rates.shift();\n\n    return rates.map(function(rate) {\n      var newMax = utils.toCurrency(rate.max, currency, sourceCurrency);\n      return { max: newMax, rate: rate.rate };\n    });\n  }.property('rates', 'currencyCode', 'sourceCurrencyCode')\n});\n\nApp.SampleRatesComponent = Ember.Component.extend({\n  countryOrState: null,\n  currencyCode: null,\n\n  demoIncome: null,\n\n  currency: function() {\n    return symbols[this.get('currencyCode')];\n  }.property('currencyCode'),\n\n  sampleIncomes: function() {\n    var currency = this.get('currencyCode');\n    var incomes = [25000, 50000, 75000, 100000, 250000, 500000, 1000000];\n\n    return incomes.map(function(usd) {\n      return utils.toCurrency(usd, currency, 'USD');\n    });\n  }.property('currencyCode'),\n\n  samples: function() {\n    var country = this.get('countryOrState');\n    var currency = this.get('currencyCode');\n\n    return this.get('sampleIncomes').map(function(income) {\n      return App.TaxCalculator.calculateTotalWithStats(country, income, currency);\n    });\n  }.property('countryOrState', 'sampleIncomes'),\n\n  result: function() {\n    var income = this.get('demoIncome');\n    var country = this.get('countryOrState');\n    var currency = this.get('currencyCode');\n\n    return App.TaxCalculator.calculateTotalWithStats(country, income, currency);\n  }.property('countryOrState', 'demoIncome')\n});\n\nApp.MoneyInputComponent = Ember.Component.extend({\n  currencyCode: null,\n  value: null,\n  placeholder: null,\n  autofocus: false,\n\n  debounce: null,\n\n  setFmt: function() {\n    this.updateMoney();\n  }.on('init'),\n\n  fmtValue: null,\n\n  updateMoney: function() {\n    this.set('fmtValue', accounting.formatNumber(this.get('value')));\n  }.observes('value'),\n\n  inputValueDidChange: function() {\n    this.set('fmtValue', accounting.formatNumber(this.get('fmtValue')));\n\n    var debounce = this.get('debounce');\n\n    if (debounce) {\n      Ember.run.debounce(this, this.updateValue, debounce);\n    } else {\n      this.updateValue();\n    }\n  }.observes('fmtValue'),\n\n  updateValue: function() {\n    this.set('value', accounting.unformat(this.get('fmtValue')));\n  }\n});\n\nApp.CheckMarkComponent = Ember.Component.extend({\n  tagName: 'span',\n  value: null\n});\n\nApp.BsPanelComponent = Ember.Component.extend({\n  classNames: ['panel panel-default']\n});\n\nApp.VisaCardComponent = Ember.Component.extend({\n  visa: null,\n  title: null\n});\n\nApp.SubjectiveRatingComponent = App.SubjectiveBaseComponent.extend({\n  layout: Ember.Handlebars.compile('{{#if rating}}{{description}} ({{numDesc}}){{else}}&emdash;{{/if}}'),\n\n  name: null, // rating name\n  rating: null, // rating value\n\n  isBusiness: Ember.computed.equal('name', 'business'),\n  isCorruption: Ember.computed.equal('name', 'corruption'),\n\n  numDesc: function() {\n    var num = this.get('rating');\n    if (this.get('isBusiness')) {\n      return '#' + num\n    } else if (this.get('isCorruption')) {\n      return num + ' / 100';\n    } else {\n      return num;\n    }\n  }.property('rating', 'isBusiness'),\n\n  description: function() {\n    return utils.subjectiveWord(this.get('name'), this.get('rating'));\n  }.property('name', 'rating')\n});\n\nApp.TotalRatingComponent = App.SubjectiveBaseComponent.extend({\n  layout: Ember.Handlebars.compile('{{description}}'),\n\n  ratings: null, // rating value\n\n  description: function() {\n    return utils.subjectiveWord('total', this.get('ratings'));\n  }.property('name', 'rating')\n});\n","module.exports = {\n  currencies: {\n    url: 'http://openexchangerates.org/api/latest.json?app_id=8556217a83d84985930d67d6cf934289',\n    symbols: {\n      USD: 'US$',\n      CAD: 'CA$',\n      HKD: 'HK$',\n      SGD: 'SG$',\n      AUD: 'AU$',\n      THB: '฿',\n      JPY: '¥',\n      GBP: '£',\n      EUR: '€',\n      CZK: 'Kč',\n      UAH: '₴',\n      BTC: 'BTC'\n    },\n\n    sorter: ['USD', 'EUR', 'GBP', 'RUB', 'UAH', 'BTC']\n  },\n\n  subjectiveWords: {\n    crime: ['very high', 'high', 'moderate', 'low', 'very low'],\n    prices: ['very expensive', 'expensive', 'moderate', 'cheap', 'very cheap'],\n    business: ['very hard', 'hard', 'moderate', 'easy', 'very easy'],\n    corruption: ['very bad', 'bad', 'moderate', 'good', 'very good'],\n    total: ['very bad', 'bad', 'moderate', 'good', 'very good']\n  }\n};\n","var symbols = require('config').currencies.symbols;\n\nApp.ApplicationController = Ember.Controller.extend({\n  currencyCode: 'USD'\n});\n\nApp.NavbarController = Ember.Controller.extend({\n  needs: ['application'],\n  currencyCode: Ember.computed.alias('controllers.application.currencyCode')\n});\n\nApp.RatingsController = Ember.ArrayController.extend({\n});\n\nApp.FilterSet = Ember.Object.extend({\n  noEducationWorkVisa: false,\n  warmClimate: false,\n  ruleOfLaw: false,\n  lowTaxes: false,\n  noWorkVisaQuotas: false,\n  simpleStartupVisa: false,\n\n  allFiltersChanged: function() {\n    this.notifyPropertyChange('allFilters');\n  }.observes('noEducationWorkVisa'),\n\n  doesMatch: function(country) {\n    var noEdu = this.get('noEducationWorkVisa');\n    var warmClimate = this.get('warmClimate');\n    var ruleOfLaw = this.get('ruleOfLaw');\n    var lowTaxes = this.get('lowTaxes');\n    var noWorkVisaQuotas = this.get('noWorkVisaQuotas');\n    var simpleStartupVisa = this.get('simpleStartupVisa');\n\n    var clearFilters = !noEdu && !warmClimate && !ruleOfLaw && !lowTaxes && !noWorkVisaQuotas && !simpleStartupVisa;\n\n    if (clearFilters) {\n      return true;\n    } else {\n      var work = country.get('immigration.work');\n\n      return work.degreeReq === false;\n    }\n  }\n});\n\nApp.ChooseDestinyController = Ember.ArrayController.extend({\n  filterSet: function() {\n    return App.FilterSet.create();\n  }.property(),\n\n  results: function() {\n    var countries = this.get('model');\n    var filters = this.get('filterSet');\n\n    return countries.filter(function(country) {\n      return filters.doesMatch(country);\n    });\n  }.property('@each', 'filterSet.allFilters')\n});\n\nApp.TaxRatingController = Ember.Controller.extend({\n  needs: ['application'],\n  queryParams: ['income', 'currencyCode'],\n\n  currencyCode: Ember.computed.alias('controllers.application.currencyCode'),\n  income: null,\n\n  currency: function() {\n    return symbols[this.get('currencyCode')];\n  }.property('currencyCode'),\n\n  results: function() {\n    var self = this;\n\n    return App.COUNTRIES.reduce(function(memo, item) {\n      if (item.get('hasStates')) {\n        return memo.concat(item.get('states'));\n      } else {\n        return memo.concat([item]);\n      }\n    }, []).map(function(countryOrState) {\n      var country, state;\n\n      if (countryOrState.get('isCountry')) {\n        country = countryOrState;\n      } else {\n        country = countryOrState.get('country');\n        state = countryOrState;\n      }\n\n      return App.CalculationEntry.create({\n        country: country,\n        state: state,\n        source: self,\n        incomeBinding: 'source.income',\n        currencyCodeBinding: 'source.currencyCode'\n      });\n    });\n  }.property(),\n\n  actions: {\n    setIncome: function(value) {\n      this.set('currencyCode', 'USD');\n      this.set('income', value);\n    }\n  }\n});\n\nApp.ResultsController = Ember.ArrayController.extend({\n  sortProperties: ['taxAmount'],\n  needs: ['tax_rating'],\n  currencyCode: Ember.computed.alias('controllers.tax_rating.currencyCode'),\n  currency: Ember.computed.alias('controllers.tax_rating.currency')\n});\n\n\nApp.DetailsController = Ember.ObjectController.extend({\n  needs: ['application'],\n  currencyCode: Ember.computed.alias('controllers.application.currencyCode'),\n\n  country: Ember.computed.alias('model'),\n  state: null,\n\n  countryOrState: function() {\n    return this.get('state') || this.get('country');\n  }.property('country', 'state')\n});\n","module.exports = {\n  \"name\": \"Australia\",\n  \"slug\": \"australia\",\n  \"code\": \"AUD\",\n  \"ratings\": {\n    \"crime\": 41.23,\n    \"prices\": 108.51,\n    \"business\": 11,\n    \"corruption\": 81\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Income_tax_in_Australia#Individual_income_tax_rates_.28residents.29\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 18200,\n      \"rate\": 0\n    },\n    {\n      \"max\": 37000,\n      \"rate\": 19\n    },\n    {\n      \"max\": 80000,\n      \"rate\": 32.5\n    },\n    {\n      \"max\": 180000,\n      \"rate\": 37\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Austria\",\n  \"slug\": \"austria\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 25.83,\n    \"prices\": 89.5,\n    \"business\": 30,\n    \"corruption\": 69\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": {\n      \"minAmount\": 3000000,\n      \"yearsBeforeCitizenship\": \"0\",\n      \"source\": \"http://best-citizenships.com/austria-citizenship.htm\"\n    },\n    \"business\": false\n  },\n  \"ratesSource\": \"http://europa.eu/youreurope/citizens/work/retire/taxes/austria/index_en.htm\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 10999,\n      \"rate\": 0\n    },\n    {\n      \"max\": 25000,\n      \"rate\": 36.5\n    },\n    {\n      \"max\": 60000,\n      \"rate\": 43.2\n    },\n    {\n      \"max\": null,\n      \"rate\": 50\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Belarus\",\n  \"slug\": \"belarus\",\n  \"code\": \"BYR\",\n  \"ratings\": {\n    \"crime\": 32.89,\n    \"prices\": 50.35,\n    \"business\": 63,\n    \"corruption\": 29\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rate\": 12\n};","module.exports = {\n  \"name\": \"Canada\",\n  \"slug\": \"canada\",\n  \"code\": \"CAD\",\n  \"ratings\": {\n    \"crime\": 36.29,\n    \"prices\": 87.9,\n    \"business\": 19,\n    \"corruption\": 81\n  },\n  \"immigration\": {\n    \"work\": {\n      \"degreeReq\": false,\n      \"source\": \"http://www.workpermit.com/canada/individual/skilled.htm\"\n    },\n    \"investment\": {\n      \"minAmount\": 800000,\n      \"yearsBeforePR\": 0,\n      \"source\": \"http://news.gc.ca/web/article-en.do?nid=814939\"\n    },\n    \"business\": {\n      \"source\": \"http://www.cic.gc.ca/english/immigrate/business/start-up/eligibility.asp#language\",\n      \"specialConditions\": [\n        \"Startup visa.\",\n        \"Must have min $11824 in bank for settlement\",\n        \"You must secure a minimum investment of $200,000 if the investment comes from a designated Canadian venture capital fund.\",\n        \"You must secure a minimum investment of $75,000 if the investment comes from a designated Canadian angel investor group.\",\n        \"You may proceed with no investment if you're in business incubator.\",\n        \"Alternative: visa for self-employed persons\"\n      ]\n    }\n  },\n  \"ratesSource\": \"http://www.cra-arc.gc.ca/tx/ndvdls/fq/txrts-eng.html\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 43561,\n      \"rate\": 15\n    },\n    {\n      \"max\": 87123,\n      \"rate\": 22\n    },\n    {\n      \"max\": 135054,\n      \"rate\": 26\n    },\n    {\n      \"max\": null,\n      \"rate\": 29\n    }\n  ],\n  \"states\": [\n    {\n      \"name\": \"Quebec\",\n      \"slug\": \"qc\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 41095,\n          \"rate\": 16\n        },\n        {\n          \"max\": 82190,\n          \"rate\": 20\n        },\n        {\n          \"max\": 100000,\n          \"rate\": 24\n        },\n        {\n          \"max\": null,\n          \"rate\": 25.75\n        }\n      ]\n    },\n    {\n      \"name\": \"Ontario\",\n      \"slug\": \"on\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 39723,\n          \"rate\": 5.05\n        },\n        {\n          \"max\": 79448,\n          \"rate\": 9.15\n        },\n        {\n          \"max\": 509000,\n          \"rate\": 11.16\n        },\n        {\n          \"max\": null,\n          \"rate\": 13.16\n        }\n      ]\n    },\n    {\n      \"name\": \"Manitoba\",\n      \"slug\": \"mb\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 31000,\n          \"rate\": 10.8\n        },\n        {\n          \"max\": 67000,\n          \"rate\": 12.75\n        },\n        {\n          \"max\": null,\n          \"rate\": 17.4\n        }\n      ]\n    },\n    {\n      \"name\": \"Alberta\",\n      \"slug\": \"ab\",\n      \"rate\": 10\n    },\n    {\n      \"name\": \"British Columbia\",\n      \"slug\": \"bc\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 37568,\n          \"rate\": 5.06\n        },\n        {\n          \"max\": 71138,\n          \"rate\": 7.7\n        },\n        {\n          \"max\": 82268,\n          \"rate\": 10.5\n        },\n        {\n          \"max\": 104754,\n          \"rate\": 12.29\n        },\n        {\n          \"max\": null,\n          \"rate\": 14.7\n        }\n      ]\n    }\n  ]\n};","module.exports = {\n  \"name\": \"China\",\n  \"slug\": \"china\",\n  \"code\": \"CNY\",\n  \"ratings\": {\n    \"crime\": 30.13,\n    \"prices\": 54.12,\n    \"business\": 96,\n    \"corruption\": 40\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_China#Individual_income_tax\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 1500,\n      \"rate\": 3\n    },\n    {\n      \"max\": 4500,\n      \"rate\": 10\n    },\n    {\n      \"max\": 9000,\n      \"rate\": 20\n    },\n    {\n      \"max\": 35000,\n      \"rate\": 25\n    },\n    {\n      \"max\": 55000,\n      \"rate\": 30\n    },\n    {\n      \"max\": 80000,\n      \"rate\": 35\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Cyprus\",\n  \"slug\": \"cyprus\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 37.56,\n    \"prices\": 89.76,\n    \"business\": 39,\n    \"corruption\": 63\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": {\n      \"minAmount\": 3000000,\n      \"yearsBeforeCitizenship\": \"0\",\n      \"source\": \"http://best-citizenships.com/cyprus-citizenship.htm\"\n    },\n    \"business\": false\n  },\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 19500,\n      \"rate\": 0\n    },\n    {\n      \"max\": 28000,\n      \"rate\": 20\n    },\n    {\n      \"max\": 36300,\n      \"rate\": 25\n    },\n    {\n      \"max\": 60000,\n      \"rate\": 30\n    },\n    {\n      \"max\": null,\n      \"rate\": 35\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Czech Republic\",\n  \"slug\": \"czech-republic\",\n  \"code\": \"CZK\",\n  \"ratings\": {\n    \"crime\": 33.88,\n    \"prices\": 56.59,\n    \"business\": 75,\n    \"corruption\": 48\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": {\n      \"minCapital\": 200000,\n      \"yearsBeforePR\": 5,\n      \"yearsBeforeCitizenship\": 5,\n      \"stayReq\": 90,\n      \"source\": \"http://business-investor-immigration.com/czech-business-immigration-program/\"\n    }\n  },\n  \"rate\": 15\n};","module.exports = {\n  \"name\": \"France\",\n  \"slug\": \"france\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 47.28,\n    \"prices\": 100.21,\n    \"business\": 38,\n    \"corruption\": 71\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_France#Income_Taxes\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 6011,\n      \"rate\": 0\n    },\n    {\n      \"max\": 11991,\n      \"rate\": 5.5\n    },\n    {\n      \"max\": 26631,\n      \"rate\": 14\n    },\n    {\n      \"max\": 71397,\n      \"rate\": 30\n    },\n    {\n      \"max\": 151200,\n      \"rate\": 41\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Georgia\",\n  \"slug\": \"georgia\",\n  \"code\": \"GEL\",\n  \"ratings\": {\n    \"crime\": 19.91,\n    \"prices\": 46.22,\n    \"business\": 8,\n    \"corruption\": 49\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rate\": 20\n};","module.exports = {\n  \"name\": \"Germany\",\n  \"slug\": \"germany\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 27.14,\n    \"prices\": 87.14,\n    \"business\": 21,\n    \"corruption\": 78\n  },\n  \"immigration\": {\n    \"work\": {\n      \"degreeReq\": false,\n      \"canApplyForPR\": true,\n      \"yearsBeforePR\": 5,\n      \"source\": \"http://www.internations.org/germany-expats/guide/15983-visa-administration/how-to-get-a-german-residence-permit-15953\"\n    },\n    \"investment\": {\n      \"minAmount\": 250000,\n      \"minJobs\": 5,\n      \"source\": \"http://en.wikipedia.org/wiki/Immigration_to_Germany\"\n    },\n    \"business\": false\n  },\n  \"ratesSource\": \"http://www.parmentier.de/steuer/steuer.htm?wagetax.htm\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 8130,\n      \"rate\": 0\n    },\n    {\n      \"max\": 52881,\n      \"rate\": 14\n    },\n    {\n      \"max\": 250731,\n      \"rate\": 42\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Hong Kong\",\n  \"slug\": \"hong-kong\",\n  \"code\": \"HKD\",\n  \"ratings\": {\n    \"crime\": 22.68,\n    \"prices\": 76.36,\n    \"business\": 2,\n    \"corruption\": 75\n  },\n  \"climate\": {\n    \"high\": 31.4,\n    \"low\": 14.5,\n    \"rainyDays\": 137\n  },\n  \"immigration\": {\n    \"work\": {\n      \"degreeReq\": true,\n      \"canApplyForPR\": true,\n      \"source\": \"http://www.clic.org.hk/en/topics/immigration/hk_permanent_residence/\"\n    },\n    \"investment\": {\n      \"minAmount\": 10000000,\n      \"yearsBeforePR\": 7,\n      \"source\": \"http://www.second-citizenship.org/permanent-residence/immigration-through-investment-to-hong-kong/\"\n    },\n    \"business\": false\n  },\n  \"rates\": [\n    \"simple\",\n    {\n      \"max\": 40000,\n      \"rate\": 2\n    },\n    {\n      \"max\": 80000,\n      \"rate\": 7\n    },\n    {\n      \"max\": 120000,\n      \"rate\": 12\n    },\n    {\n      \"max\": null,\n      \"rate\": 17\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Iceland\",\n  \"slug\": \"iceland\",\n  \"code\": \"ISK\",\n  \"ratings\": {\n    \"crime\": 31.68,\n    \"prices\": 111.75,\n    \"business\": 13,\n    \"corruption\": 78\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 2512800,\n      \"rate\": 37.31\n    },\n    {\n      \"max\": 8166600,\n      \"rate\": 40.21\n    },\n    {\n      \"max\": null,\n      \"rate\": 46.21\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Ireland\",\n  \"slug\": \"ireland\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 53.59,\n    \"prices\": 106.61,\n    \"business\": 15,\n    \"corruption\": 72\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_the_Republic_of_Ireland#Rates_of_income_tax\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 32800,\n      \"rate\": 20\n    },\n    {\n      \"max\": null,\n      \"rate\": 41\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Israel\",\n  \"slug\": \"israel\",\n  \"code\": \"ILS\",\n  \"ratings\": {\n    \"crime\": 33.28,\n    \"prices\": 91.45,\n    \"business\": 35,\n    \"corruption\": 61\n  },\n  \"climate\": {\n    \"high\": 30,\n    \"low\": 9,\n    \"rainyDays\": 45\n  },\n  \"immigration\": {\n    \"work\": {\n      \"canApplyForPR\": true,\n      \"source\": \"http://www.justlanded.com/english/Israel/Israel-Guide/Visas-Permits/Visas\"\n    },\n    \"investment\": {\n      \"specialConditions\": [\n        \"Only for U.S. investors\"\n      ]\n    },\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_Israel#Personal_Income_tax\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 62400,\n      \"rate\": 10\n    },\n    {\n      \"max\": 106560,\n      \"rate\": 14\n    },\n    {\n      \"max\": 173160,\n      \"rate\": 21\n    },\n    {\n      \"max\": 261360,\n      \"rate\": 30\n    },\n    {\n      \"max\": 501960,\n      \"rate\": 33\n    },\n    {\n      \"max\": null,\n      \"rate\": 48\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Italy\",\n  \"slug\": \"italy\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 45.59,\n    \"prices\": 96.81,\n    \"business\": 65,\n    \"corruption\": 43\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_Italy\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 15000,\n      \"rate\": 23\n    },\n    {\n      \"max\": 28000,\n      \"rate\": 27\n    },\n    {\n      \"max\": 55000,\n      \"rate\": 38\n    },\n    {\n      \"max\": 75000,\n      \"rate\": 41\n    },\n    {\n      \"max\": null,\n      \"rate\": 43\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Japan\",\n  \"slug\": \"japan\",\n  \"code\": \"JPY\",\n  \"ratings\": {\n    \"crime\": 18.1,\n    \"prices\": 94.13,\n    \"business\": 27,\n    \"corruption\": 74\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 1950000,\n      \"rate\": 5\n    },\n    {\n      \"max\": 3300000,\n      \"rate\": 10\n    },\n    {\n      \"max\": 6950000,\n      \"rate\": 20\n    },\n    {\n      \"max\": 9000000,\n      \"rate\": 23\n    },\n    {\n      \"max\": 18000000,\n      \"rate\": 33\n    },\n    {\n      \"max\": null,\n      \"rate\": 40\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Latvia\",\n  \"slug\": \"latvia\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 43.74,\n    \"prices\": 65.95,\n    \"business\": 24,\n    \"corruption\": 53\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rate\": 24\n};","module.exports = {\n  \"name\": \"Malaysia\",\n  \"slug\": \"malaysia\",\n  \"code\": \"MYR\",\n  \"ratings\": {\n    \"crime\": 66.41,\n    \"prices\": 48.66,\n    \"business\": 6,\n    \"corruption\": 50\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"http://savemoney.my/malaysia-personal-income-tax-guide-2013-rates-exemptions-rebates-reliefs-and-more/\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 2500,\n      \"rate\": 0\n    },\n    {\n      \"max\": 5000,\n      \"rate\": 1\n    },\n    {\n      \"max\": 10000,\n      \"rate\": 3\n    },\n    {\n      \"max\": 20000,\n      \"rate\": 3\n    },\n    {\n      \"max\": 35000,\n      \"rate\": 7\n    },\n    {\n      \"max\": 50000,\n      \"rate\": 12\n    },\n    {\n      \"max\": 70000,\n      \"rate\": 19\n    },\n    {\n      \"max\": 100000,\n      \"rate\": 24\n    },\n    {\n      \"max\": null,\n      \"rate\": 26\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Netherlands\",\n  \"slug\": \"netherlands\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 37.07,\n    \"prices\": 98.82,\n    \"business\": 28,\n    \"corruption\": 83\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"http://en.wikipedia.org/wiki/Income_tax_in_the_Netherlands#Progressive_tax_on_wages_etc._.28box_1.29\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 19645,\n      \"rate\": 5.85\n    },\n    {\n      \"max\": 33363,\n      \"rate\": 10.85\n    },\n    {\n      \"max\": 55991,\n      \"rate\": 42\n    },\n    {\n      \"max\": null,\n      \"rate\": 52\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Poland\",\n  \"slug\": \"poland\",\n  \"code\": \"PLN\",\n  \"ratings\": {\n    \"crime\": 37.53,\n    \"prices\": 53.68,\n    \"business\": 45,\n    \"corruption\": 60\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"http://europa.eu/youreurope/citizens/work/abroad/taxes/poland/employed_en.htm\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 3091,\n      \"rate\": 0\n    },\n    {\n      \"max\": 85528,\n      \"rate\": 18\n    },\n    {\n      \"max\": null,\n      \"rate\": 32\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Russia\",\n  \"slug\": \"russia\",\n  \"code\": \"RUB\",\n  \"ratings\": {\n    \"crime\": 52.67,\n    \"prices\": 61.8,\n    \"business\": 92,\n    \"corruption\": 28\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rate\": 13\n};","module.exports = {\n  \"name\": \"Singapore\",\n  \"slug\": \"singapore\",\n  \"code\": \"SGD\",\n  \"ratings\": {\n    \"crime\": 21.35,\n    \"prices\": 100.01,\n    \"business\": 1,\n    \"corruption\": 86\n  },\n  \"immigration\": {\n    \"work\": {\n      \"degreeReq\": false,\n      \"canApplyForPR\": true\n    },\n    \"investment\": {\n      \"minAmount\": 2500000,\n      \"yearsBeforePR\": 0,\n      \"yearsBeforeCitizenship\": 2\n    },\n    \"business\": {\n      \"minCapital\": 50000,\n      \"minShare\": 30,\n      \"specialConditions\": [\n        \"The company is receiving monetary funding or investment of at least S$100,000 from a third-party Venture Capitalist (VC) or angel investor accredited by a Singapore Government agency.\",\n        \"The company holds an Intellectual Property (IP) that is registered with a recognised national IP institution.\",\n        \"The company has on-going research collaboration with an institution recognised by Agency for Science, Technology and Research (A*STAR) or Institutes of Higher Learning in Singapore.\",\n        \"The company is an incubatee at a Singapore Government-supported incubator.\"\n      ],\n      \"source\": \"http://www.guidemesingapore.com/relocation/work-pass/singapore-entrepreneur-pass-guide\"\n    }\n  },\n  \"climate\": {\n    \"high\": 31,\n    \"low\": 24.1,\n    \"rainyDays\": 178\n  },\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 20000,\n      \"rate\": 0\n    },\n    {\n      \"max\": 30000,\n      \"rate\": 2\n    },\n    {\n      \"max\": 40000,\n      \"rate\": 3.5\n    },\n    {\n      \"max\": 80000,\n      \"rate\": 7\n    },\n    {\n      \"max\": 120000,\n      \"rate\": 11.5\n    },\n    {\n      \"max\": 160000,\n      \"rate\": 15\n    },\n    {\n      \"max\": 200000,\n      \"rate\": 17\n    },\n    {\n      \"max\": 320000,\n      \"rate\": 18\n    },\n    {\n      \"max\": null,\n      \"rate\": 20\n    }\n  ]\n};","module.exports = {\n  \"name\": \"South Korea\",\n  \"slug\": \"south-korea\",\n  \"code\": \"KRW\",\n  \"ratings\": {\n    \"crime\": 16.35,\n    \"prices\": 87.56,\n    \"business\": 7,\n    \"corruption\": 55\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"http://www.korea4expats.com/article-income-taxes.html\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 12000000,\n      \"rate\": 6\n    },\n    {\n      \"max\": 46000000,\n      \"rate\": 16\n    },\n    {\n      \"max\": 88000000,\n      \"rate\": 25\n    },\n    {\n      \"max\": null,\n      \"rate\": 35\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Spain\",\n  \"slug\": \"spain\",\n  \"code\": \"EUR\",\n  \"ratings\": {\n    \"crime\": 32.42,\n    \"prices\": 77.81,\n    \"business\": 52,\n    \"corruption\": 59\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Income_tax_in_Spain\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 17707.2,\n      \"rate\": 24\n    },\n    {\n      \"max\": 33007.2,\n      \"rate\": 28\n    },\n    {\n      \"max\": 53407.2,\n      \"rate\": 37\n    },\n    {\n      \"max\": 120000.2,\n      \"rate\": 43\n    },\n    {\n      \"max\": 175000.2,\n      \"rate\": 44\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Sweden\",\n  \"slug\": \"sweden\",\n  \"code\": \"SEK\",\n  \"ratings\": {\n    \"crime\": 38.23,\n    \"prices\": 103.68,\n    \"business\": 14,\n    \"corruption\": 89\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 413200,\n      \"rate\": 30\n    },\n    {\n      \"max\": 591600,\n      \"rate\": 50\n    },\n    {\n      \"max\": null,\n      \"rate\": 55\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Thailand\",\n  \"slug\": \"thailand\",\n  \"code\": \"THB\",\n  \"ratings\": {\n    \"crime\": 37.56,\n    \"prices\": 45.95,\n    \"business\": 19,\n    \"corruption\": 35\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"http://www.rd.go.th/publish/6045.0.html\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 150000,\n      \"rate\": 0\n    },\n    {\n      \"max\": 500000,\n      \"rate\": 10\n    },\n    {\n      \"max\": 1000000,\n      \"rate\": 20\n    },\n    {\n      \"max\": 4000000,\n      \"rate\": 30\n    },\n    {\n      \"max\": null,\n      \"rate\": 37\n    }\n  ]\n};","module.exports = {\n  \"name\": \"United Arab Emirates\",\n  \"slug\": \"uae\",\n  \"code\": \"AED\",\n  \"ratings\": {\n    \"crime\": 20.79,\n    \"prices\": 68.25,\n    \"business\": 23,\n    \"corruption\": 69\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rate\": 0\n};","module.exports = {\n  \"name\": \"United Kingdom\",\n  \"slug\": \"uk\",\n  \"code\": \"GBP\",\n  \"ratings\": {\n    \"crime\": 42.62,\n    \"prices\": 100.11,\n    \"business\": 10,\n    \"corruption\": 76\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"ratesSource\": \"https://en.wikipedia.org/wiki/Taxation_in_the_United_Kingdom#Income_tax\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 32011,\n      \"rate\": 20\n    },\n    {\n      \"max\": 150000,\n      \"rate\": 40\n    },\n    {\n      \"max\": null,\n      \"rate\": 45\n    }\n  ]\n};","module.exports = {\n  \"name\": \"Ukraine\",\n  \"slug\": \"ukraine\",\n  \"code\": \"UAH\",\n  \"ratings\": {\n    \"crime\": 49.37,\n    \"prices\": 45.64,\n    \"business\": 112,\n    \"corruption\": 25\n  },\n  \"immigration\": {\n    \"work\": false,\n    \"investment\": false,\n    \"business\": false\n  },\n  \"rates\": [\n    \"simple\",\n    {\n      \"max\": 12180,\n      \"rate\": 15\n    },\n    {\n      \"max\": null,\n      \"rate\": 17\n    }\n  ]\n};","module.exports = {\n  \"name\": \"United States\",\n  \"slug\": \"usa\",\n  \"code\": \"USD\",\n  \"ratings\": {\n    \"crime\": 50.15,\n    \"prices\": 77.39,\n    \"business\": 4,\n    \"corruption\": 73\n  },\n  \"immigration\": {\n    \"work\": {\n      \"degreeReq\": true,\n      \"canApplyForPR\": true,\n      \"quota\": 65000,\n      \"source\": \"http://www.uscis.gov/working-united-states/temporary-workers/h-1b-specialty-occupations-and-fashion-models/h-1b-specialty-occupations-dod-cooperative-research-and-development-project-workers-and-fashion-models\"\n    },\n    \"investment\": {\n      \"minAmount\": 1000000,\n      \"minJobs\": 10,\n      \"yearsBeforePR\": 2,\n      \"source\": \"http://www.uscis.gov/working-united-states/permanent-workers/employment-based-immigration-fifth-preference-eb-5/eb-5-immigrant-investor-process\"\n    },\n    \"business\": false\n  },\n  \"ratesSource\": \"http://www.worldwide-tax.com/us/us_taxes.asp\",\n  \"rates\": [\n    \"incremental\",\n    {\n      \"max\": 8925,\n      \"rate\": 0\n    },\n    {\n      \"max\": 36250,\n      \"rate\": 15\n    },\n    {\n      \"max\": 87850,\n      \"rate\": 25\n    },\n    {\n      \"max\": 183250,\n      \"rate\": 28\n    },\n    {\n      \"max\": 398350,\n      \"rate\": 33\n    },\n    {\n      \"max\": 400000,\n      \"rate\": 35\n    },\n    {\n      \"max\": null,\n      \"rate\": 39.6\n    }\n  ],\n  \"states\": [\n    {\n      \"name\": \"Alaska / Florida / Nevada / Texas\",\n      \"slug\": \"ak-fl-nv-tx\",\n      \"rate\": 0\n    },\n    {\n      \"name\": \"California\",\n      \"slug\": \"ca\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 7455,\n          \"rate\": 0\n        },\n        {\n          \"max\": 17676,\n          \"rate\": 2\n        },\n        {\n          \"max\": 27897,\n          \"rate\": 4\n        },\n        {\n          \"max\": 38726,\n          \"rate\": 6\n        },\n        {\n          \"max\": 48942,\n          \"rate\": 8\n        },\n        {\n          \"max\": 250000,\n          \"rate\": 9.3\n        },\n        {\n          \"max\": 300000,\n          \"rate\": 10.3\n        },\n        {\n          \"max\": 500000,\n          \"rate\": 11.3\n        },\n        {\n          \"max\": null,\n          \"rate\": 12.3\n        }\n      ]\n    },\n    {\n      \"name\": \"Delaware\",\n      \"slug\": \"de\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 2000,\n          \"rate\": 0\n        },\n        {\n          \"max\": 5000,\n          \"rate\": 2.2\n        },\n        {\n          \"max\": 10000,\n          \"rate\": 3.9\n        },\n        {\n          \"max\": 20000,\n          \"rate\": 4.8\n        },\n        {\n          \"max\": 25000,\n          \"rate\": 5.2\n        },\n        {\n          \"max\": 60000,\n          \"rate\": 5.55\n        },\n        {\n          \"max\": null,\n          \"rate\": 6.75\n        }\n      ]\n    },\n    {\n      \"name\": \"Kentucky\",\n      \"slug\": \"ky\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 3000,\n          \"rate\": 2\n        },\n        {\n          \"max\": 4000,\n          \"rate\": 3\n        },\n        {\n          \"max\": 5000,\n          \"rate\": 4\n        },\n        {\n          \"max\": 8000,\n          \"rate\": 5\n        },\n        {\n          \"max\": 75000,\n          \"rate\": 5.8\n        },\n        {\n          \"max\": null,\n          \"rate\": 6\n        }\n      ]\n    },\n    {\n      \"name\": \"New York\",\n      \"slug\": \"ny\",\n      \"rates\": [\n        \"incremental\",\n        {\n          \"max\": 8000,\n          \"rate\": 4\n        },\n        {\n          \"max\": 11000,\n          \"rate\": 4.5\n        },\n        {\n          \"max\": 13000,\n          \"rate\": 5.25\n        },\n        {\n          \"max\": 20000,\n          \"rate\": 5.9\n        },\n        {\n          \"max\": 75000,\n          \"rate\": 6.45\n        },\n        {\n          \"max\": 200000,\n          \"rate\": 6.65\n        },\n        {\n          \"max\": 1000000,\n          \"rate\": 6.85\n        },\n        {\n          \"max\": null,\n          \"rate\": 8.72\n        }\n      ]\n    }\n  ]\n};","var utils = require('utils');\n\nEmber.Handlebars.helper('number', function(value) {\n  return accounting.formatNumber(value);\n});\n\nEmber.Handlebars.helper('rawPercent', function(value) {\n  return accounting.formatNumber(value, 2) + '%';\n});\n\nEmber.Handlebars.helper('percent', function(value) {\n  return accounting.formatNumber(value * 100, 2) + '%';\n});\n\nEmber.Handlebars.helper('yesno', function(value) {\n  return value ? 'yes' : 'no';\n});\n\nEmber.Handlebars.helper('money', function(value) {\n  if (value === Infinity) return 'Infinity';\n  return accounting.formatMoney(value, '');\n});\n\nEmber.Handlebars.helper('multi-money', function(value, from, to) {\n  var converted = utils.toCurrency(value, to, from);\n  var money = function(v, c) { return accounting.formatMoney(v, c + '&nbsp;'); };\n\n  return new Ember.Handlebars.SafeString(money(value, from) + ' (' + money(converted, to) + ')');\n});\n\nEmber.Handlebars.helper('subj-climate', App.SubjectiveClimateComponent);\nEmber.Handlebars.helper('subj-rating', App.SubjectiveRatingComponent);\nEmber.Handlebars.helper('total-rating', App.TotalRatingComponent);\n","var App = require('application');\nvar url = require('config').currencies.url;\n\n$.getJSON(url, function(data) {\n  if (!fx) throw new Error('Provide money.js library');\n  fx.rates = data.rates;\n  fx.base = data.base;\n\n  App.advanceReadiness();\n});\n","var utils = require('utils');\n\nApp.Taxable = Ember.Mixin.create({\n  rates: null,\n\n  taxBrackets: function() {\n    var rates = this.get('rates').slice();\n    rates.shift();\n    return rates;\n  }.property('rates'),\n\n  isFlatTax: Ember.computed.equal('taxBrackets.length', 1),\n  flatTaxRate: Ember.computed.alias('taxBrackets.firstObject.rate'),\n});\n\nApp.Country = Ember.Object.extend(App.Taxable, {\n  name: null,\n  slug: null,\n  code: null,\n  prosperityIndexRank: null,\n  ratesSource: null,\n  states: null,\n\n  immigration: null,\n\n  hasStates: Ember.computed.notEmpty('states'),\n\n  isCountry: true,\n  isState: false,\n\n  flagURL: function() {\n    return 'flags/' + this.get('name').replace(/ /g, '-') + '.png';\n  }.property('name')\n});\n\nApp.CountryState = Ember.Object.extend(App.Taxable, {\n  country: null,\n  name: null,\n  slug: null,\n  code: Ember.computed.alias('country.code'),\n\n  isCountry: false,\n  isState: true\n});\n\nApp.TaxCalculator = Ember.Object.extend({\n  calculateTotalFor: function(countryOrState, annualIncome, currentCurrency) {\n    var isState = countryOrState.get('isState');\n    var country = isState ? countryOrState.get('country') : countryOrState;\n    var state = isState ? countryOrState : null;\n\n    var total1 = this.calculateFor(country, annualIncome, currentCurrency);\n    var total2 = isState ? this.calculateFor(state, annualIncome, currentCurrency) : 0;\n\n    return total1 + total2;\n  },\n\n  calculateTotalWithStats: function(countryOrState, annualIncome, currentCurrency) {\n    var tax = this.calculateTotalFor(countryOrState, annualIncome, currentCurrency);\n    var effectiveRate = tax / annualIncome;\n    var takeHome = annualIncome - tax;\n\n    return { income: annualIncome, taxAmount: tax, effectiveRate: effectiveRate, takeHome: takeHome, currency: currentCurrency };\n  },\n\n  calculateFor: function(country, annualIncome, currentCurrency) {\n    return utils.getRate(annualIncome, currentCurrency, country.get('code'), country.get('rates'));\n  }\n}).create();\n\nApp.CalculationEntry = Ember.Object.extend({\n  country: null,\n  state: null,\n\n  income: null,\n  currencyCode: null,\n\n  countryOrState: function() {\n    return this.get('state') || this.get('country');\n  }.property('country', 'state'),\n\n  result: function() {\n    var country = this.get('countryOrState');\n    var income = this.get('income');\n    var currency = this.get('currencyCode');\n\n    return App.TaxCalculator.calculateTotalWithStats(country, income, currency);\n  }.property('countryOrState', 'income', 'currencyCode'),\n\n  taxAmount: Ember.computed.alias('result.taxAmount'),\n  effectiveRate: Ember.computed.alias('result.effectiveRate'),\n  takeHome: Ember.computed.alias('result.takeHome')\n});\n","App.Router.map(function() {\n  this.resource('tax-rating', { path: '/taxes' });\n  this.resource('ratings');\n  this.resource('choose-destiny');\n  this.resource('details', { path: '/c/:country_slug' });\n  this.resource('details_state', { path: '/c/:country_slug/:state_slug' });\n});\n\nApp.RatingsRoute  = Ember.Route.extend({\n  model: function() {\n    return App.COUNTRIES;\n  }\n});\n\nApp.DetailsRoute = Ember.Route.extend({\n  model: function(params) {\n    return App.COUNTRIES.findBy('slug', params.country_slug);\n  }\n});\n\nApp.ChooseDestinyRoute = Ember.Route.extend({\n  model: function() {\n    return App.COUNTRIES;\n  }\n});\n\nApp.DetailsStateRoute = Ember.Route.extend({\n  controllerName: 'details',\n\n  model: function(params) {\n    var country = App.COUNTRIES.findBy('slug', params.country_slug);\n    var state = country.get('states').findBy('slug', params.state_slug);\n    return [country, state];\n  },\n\n  setupController: function(controller, model) {\n    controller.set('model', model[0]);\n    controller.set('state', model[1]);\n  },\n\n  renderTemplate: function() {\n    this.render('details');\n  }\n});\n","var config = require('config');\n\nexports.toCurrency = function(value, toCode, fromCode) {\n  if (!value) return 0;\n  return fx(value).from(fromCode).to(toCode);\n};\nvar fromCurrency = function(value, fromCode, toCode) {\n  if (!value) return 0;\n  return fx(value).from(fromCode).to(toCode);\n};\n\nvar subjectiveScore = function(rating, value) {\n  if (rating === 'crime') {\n    return value > 75 ? 0 :\n      value > 50 ? 1 :\n      value > 35 ? 2 :\n      value > 25 ? 3 :\n      4;\n  } else if (rating === 'prices') {\n    return value > 110 ? 0 :\n      value > 85 ? 1 :\n      value > 65 ? 2 :\n      value > 50 ? 3 :\n      4;\n  } else if (rating === 'business') {\n    return value > 120 ? 0 :\n      value > 80 ? 1 :\n      value > 60 ? 2 :\n      value > 25 ? 3 :\n      4;\n  } else if (rating === 'corruption') {\n    return value > 75 ? 4 :\n      value > 60 ? 3 :\n      value > 45 ? 2 :\n      value > 30 ? 1 :\n      0;\n  } else if (rating === 'total') {\n    var total = 0;\n    for (var item in value) {\n      total += subjectiveScore(item, value[item])\n    }\n    console.log(total);\n    return total >= 20 ? 4 :\n      total >= 15 ? 3 :\n      total >= 10 ? 2 :\n      total >= 5 ? 1 :\n      0;\n  } else {\n    throw new Error('Unknown rating: ' + rating);\n  }\n};\n\nexports.subjectiveWord = function(rating, value) {\n  if (rating === 'crime' || rating === 'prices' || rating === 'business' || rating === 'corruption' || rating === 'total') {\n    var score = subjectiveScore(rating, value);\n    return config.subjectiveWords[rating][score];\n  } else if (rating === 'climate') {\n    return value > 20 ? 'very hot' :\n      value > 0 ? 'moderate' :\n      'cold';\n  } else {\n    throw new Error('Unknown rating: ' + rating);\n  }\n};\n\n\n// calculation type - simple or incremental\n// rates - tax brackets\n// a)    = [{min: 10000, rate: 0.05}]\n// b)    = [{min: 10000, max: 15000, rate: 0.05}]\n// convertedIncome = 15000\n\n// Get rate.\n//\n// income       - The Integer income.\n// currentCode  - The String code.\n// baseCurrency - The String code.\n// rates        - The Array of tax rates. First item should indicate calculation\n//                type. Possible calculation types are 'simple' and 'incremental'.\n\nvar getSameCurrencyRate = function(convertedIncome, rates) {\n  rates = rates.slice();\n  var type = rates.shift(); // 'simple' or 'incremental'\n\n  if (type == 'incremental') {\n    // income 45000, brackets 20k: 0%, +10k: 2%, +10k: 3.5%\n    // (45000 > 20000) = total -= 20000; 45000 - 20000 / 0\n    // (15000 > 10000) = total -= 10000; 25000 - 10000 / 2\n    // (5000  < 10000) = total = 0; 5000 / 3.5\n\n    var hasInfinity = rates.any(function(item) { return item.max == Infinity; });\n\n    if (!hasInfinity) {\n      throw new Error('Country must have max income bracket');\n    }\n\n    var ranges = rates.map(function(item, index) {\n      var prev = rates[index-1] || {};\n      var prevMax = prev.max || 0;\n      return { min: prevMax, max: item.max, rate: item.rate, fixed: item.fixed || 0 };\n    }).filter(function(item) {\n      return convertedIncome > item.min;\n    });\n\n    var charges = ranges.map(function(item) {\n      var max = item.max > convertedIncome ? convertedIncome : item.max;\n      var bracket = max - item.min;\n      var tax = bracket * item.rate / 100 + item.fixed;\n      return tax;\n    });\n\n    var total = charges.reduce(function(memo, i) { return memo + i }, 0);\n\n    return total;\n  } else {\n    var list = rates.slice().reverse();\n    var item = list.find(function(i) { return convertedIncome < i.max });\n\n    if (item) {\n      return convertedIncome * item.rate / 100;\n    }\n\n    throw new Error('No rate matches the value ' + convertedIncome);\n  }\n};\n\nexports.getRate = function(income, currentCurrency, baseCurrency, rates)  {\n  if (!rates) return 0;\n  var convertedIncome = fromCurrency(income, currentCurrency, baseCurrency);\n  var amount = getSameCurrencyRate(convertedIncome, rates);\n  return exports.toCurrency(amount, currentCurrency, baseCurrency);\n};\n\nvar normal = function(entity) {\n  if (entity.rates) entity.rates.forEach(function(rate) {\n    if (rate.max == null) rate.max = Infinity;\n  });\n};\n\nexports.normalizeRates = function(item) {\n  if (item.rates) {\n    normal(item);\n    (item.states || []).map(normal);\n    return item.rates;\n  } else {\n    return ['simple', {max: Infinity, rate: item.rate}];\n  }\n};\n\n// window.debounce = function(func, wait, immediate) {\n//   var timeout;\n//   return function() {\n//     var context = this, args = arguments;\n//     var call = function() {\n//       Ember.run(function() { func.apply(context, args); });\n//     };\n//     var later = function() {\n//       timeout = null;\n//       call();\n//     };\n//     var callNow = immediate && !timeout;\n//     clearTimeout(timeout);\n//     timeout = setTimeout(later, wait);\n//     if (callNow) call();\n//   };\n// };\n"]}